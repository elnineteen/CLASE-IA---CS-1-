<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Revolico Auto Publisher - Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-rocket"></i> Revolico Auto Publisher</h1>
                <p>Automatizaci贸n de publicaciones masivas para clasificados</p>
                <div class="status-indicator" id="connectionStatus">
                    <i class="fas fa-circle"></i>
                    <span>Desconectado</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="tab-button active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i> Dashboard
            </button>
            <button class="tab-button" data-tab="datasources">
                <i class="fas fa-database"></i> Fuentes de Datos
            </button>
            <button class="tab-button" data-tab="accounts">
                <i class="fas fa-users"></i> Cuentas
            </button>
            <button class="tab-button" data-tab="publish">
                <i class="fas fa-paper-plane"></i> Publicar
            </button>
            <button class="tab-button" data-tab="logs">
                <i class="fas fa-file-alt"></i> Logs
            </button>
        </nav>

        <!-- Tab Contents -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="dashboard-grid">
                    <!-- Statistics Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="publishedToday">0</h3>
                                <p>Publicados Hoy</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-list"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalProducts">0</h3>
                                <p>Total Productos</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="activeAccounts">0</h3>
                                <p>Cuentas Activas</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="errorCount">0</h3>
                                <p>Errores</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <h2><i class="fas fa-bolt"></i> Acciones R谩pidas</h2>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-large" id="startPublishing">
                                <i class="fas fa-play"></i>
                                Iniciar Publicaci贸n Masiva
                            </button>
                            <button class="btn btn-danger btn-large" id="stopPublishing" disabled>
                                <i class="fas fa-stop"></i>
                                Detener Publicaci贸n
                            </button>
                        </div>
                    </div>

                    <!-- Progress Section -->
                    <div class="progress-section" id="progressSection" style="display: none;">
                        <h2><i class="fas fa-tasks"></i> Progreso Actual</h2>
                        <div class="progress-info">
                            <div class="progress-text">
                                <span id="progressText">Preparando...</span>
                                <span id="progressPercentage">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>
                        <div class="current-status" id="currentStatus">
                            Iniciando sistema...
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="recent-activity">
                        <h2><i class="fas fa-history"></i> Actividad Reciente</h2>
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <i class="fas fa-info-circle"></i>
                                <span>Sistema iniciado correctamente</span>
                                <small class="timestamp">Hace unos momentos</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Sources Tab -->
            <div class="tab-content" id="datasources">
                <div class="section-header">
                    <h2><i class="fas fa-database"></i> Fuentes de Datos</h2>
                    <p>Elige y configura tu fuente de datos para los productos</p>
                </div>

                <!-- Data Source Selector -->
                <div class="datasource-selector">
                    <h3><i class="fas fa-toggle-on"></i> Fuente de Datos Activa</h3>
                    <div class="source-toggle">
                        <label class="radio-card">
                            <input type="radio" name="dataSource" value="googleSheets" checked>
                            <div class="radio-content">
                                <i class="fas fa-table"></i>
                                <span>Google Sheets</span>
                                <small>Conecta con tu hoja de c谩lculo en l铆nea</small>
                            </div>
                        </label>
                        <label class="radio-card">
                            <input type="radio" name="dataSource" value="excel">
                            <div class="radio-content">
                                <i class="fas fa-file-excel"></i>
                                <span>Archivo Excel</span>
                                <small>Sube un archivo .xlsx o .xls</small>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Google Sheets Section -->
                <div class="datasource-section" id="googleSheetsSection">
                    <h3><i class="fas fa-table"></i> Configuraci贸n de Google Sheets</h3>
                    <div class="sheets-config">
                        <div class="config-card">
                            <h4><i class="fas fa-key"></i> Autorizaci贸n</h4>
                            <div class="auth-status" id="authStatus">
                                <i class="fas fa-times-circle text-danger"></i>
                                <span>No autorizado</span>
                            </div>
                            <button class="btn btn-primary" id="authorizeGoogle">
                                <i class="fas fa-sign-in-alt"></i>
                                Autorizar Google Sheets
                            </button>
                        </div>

                        <div class="config-card">
                            <h4><i class="fas fa-link"></i> Conexi贸n</h4>
                            <button class="btn btn-secondary" id="testConnection">
                                <i class="fas fa-plug"></i>
                                Probar Conexi贸n
                            </button>
                            <div class="connection-result" id="connectionResult"></div>
                        </div>
                    </div>
                </div>

                <!-- Excel Section -->
                <div class="datasource-section" id="excelSection" style="display: none;">
                    <h3><i class="fas fa-file-excel"></i> Configuraci贸n de Excel</h3>
                    <div class="excel-config">
                        <div class="config-card">
                            <h4><i class="fas fa-upload"></i> Subir Archivo Excel</h4>
                            <div class="file-upload-area" id="excelUploadArea">
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Arrastra tu archivo Excel aqu铆 o haz clic para seleccionar</p>
                                    <small>Formatos soportados: .xlsx, .xls (m谩ximo 10MB)</small>
                                </div>
                                <input type="file" id="excelFileInput" accept=".xlsx,.xls" style="display: none;">
                            </div>
                            <button class="btn btn-primary" id="uploadExcelBtn">
                                <i class="fas fa-upload"></i>
                                Seleccionar Archivo
                            </button>
                        </div>

                        <div class="config-card" id="excelInfoCard" style="display: none;">
                            <h4><i class="fas fa-info-circle"></i> Informaci贸n del Archivo</h4>
                            <div class="excel-info" id="excelInfo"></div>
                            <div class="excel-actions">
                                <button class="btn btn-secondary" id="validateExcelBtn">
                                    <i class="fas fa-check-circle"></i>
                                    Validar Estructura
                                </button>
                                <button class="btn btn-danger" id="clearExcelBtn">
                                    <i class="fas fa-trash"></i>
                                    Limpiar Datos
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Preview -->
                <div class="products-section">
                    <div class="config-card">
                        <h3><i class="fas fa-eye"></i> Vista Previa de Productos</h3>
                        <button class="btn btn-secondary" id="previewProducts">
                            <i class="fas fa-search"></i>
                            Ver Productos
                        </button>
                        <div class="products-preview" id="productsPreview"></div>
                    </div>
                </div>

                <!-- Requirements -->
                <div class="requirements-section">
                    <h3><i class="fas fa-info-circle"></i> Estructura de Datos Requerida</h3>
                    <p>Tanto para Google Sheets como para Excel, tus datos deben tener estas columnas:</p>
                    <div class="requirements-grid">
                        <div class="requirement-item required">
                            <i class="fas fa-star text-danger"></i>
                            <strong>titulo/nombre</strong> - Nombre del producto
                        </div>
                        <div class="requirement-item required">
                            <i class="fas fa-star text-danger"></i>
                            <strong>precio</strong> - Precio del producto
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>descripcion</strong> - Descripci贸n detallada
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>categoria</strong> - Categor铆a del producto
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>fotos/imagen</strong> - URL de las im谩genes
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>ubicacion/municipio</strong> - Ubicaci贸n
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>contacto/telefono</strong> - Tel茅fono de contacto
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-info"></i>
                            <strong>moneda</strong> - Moneda (USD, CUP, etc.)
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-info"></i>
                            <strong>email</strong> - Correo electr贸nico
                        </div>
                    </div>
                    <div class="requirements-note">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Nota:</strong> Los campos marcados con <i class="fas fa-star text-danger"></i> son obligatorios.
                        El sistema reconoce autom谩ticamente variaciones en los nombres de las columnas.
                    </div>
                </div>
            </div>

            <!-- Accounts Tab -->
            <div class="tab-content" id="accounts">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> Gesti贸n de Cuentas</h2>
                    <p>Configura las cuentas de Revolico para publicar</p>
                </div>

                <div class="accounts-section">
                    <div class="add-account-card">
                        <h3><i class="fas fa-plus-circle"></i> Agregar Nueva Cuenta</h3>
                        <form id="addAccountForm" class="account-form">
                            <div class="form-group">
                                <label for="accountName">Nombre de la Cuenta:</label>
                                <input type="text" id="accountName" name="accountName" required 
                                       placeholder="Ej: MiCuenta01">
                            </div>
                            <div class="form-group">
                                <label for="cookiesFile">Archivo de Cookies:</label>
                                <input type="file" id="cookiesFile" name="cookiesFile" 
                                       accept=".json,.txt" required>
                                <small class="help-text">
                                    Sube el archivo de cookies exportado desde tu navegador
                                </small>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-upload"></i>
                                Agregar Cuenta
                            </button>
                        </form>
                    </div>

                    <div class="accounts-list">
                        <h3><i class="fas fa-list"></i> Cuentas Configuradas</h3>
                        <div id="accountsList" class="accounts-grid">
                            <!-- Las cuentas se cargar谩n din谩micamente -->
                        </div>
                    </div>
                </div>

                <div class="cookies-help">
                    <h3><i class="fas fa-question-circle"></i> 驴C贸mo exportar cookies?</h3>
                    <div class="help-steps">
                        <div class="help-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <strong>Inicia sesi贸n</strong> en Revolico.com con tu cuenta
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <strong>Instala una extensi贸n</strong> como "EditThisCookie" o "Cookie Editor"
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <strong>Exporta las cookies</strong> en formato JSON o texto
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <strong>Sube el archivo</strong> usando el formulario de arriba
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Publish Tab -->
            <div class="tab-content" id="publish">
                <div class="section-header">
                    <h2><i class="fas fa-paper-plane"></i> Centro de Publicaci贸n</h2>
                    <p>Controla y monitorea las publicaciones masivas</p>
                </div>

                <div class="publish-controls">
                    <div class="control-card">
                        <h3><i class="fas fa-cog"></i> Configuraci贸n</h3>
                        <div class="setting-group">
                            <label for="maxPublicationsPerAccount">M谩ximo por cuenta:</label>
                            <input type="number" id="maxPublicationsPerAccount" 
                                   value="20" min="1" max="50">
                        </div>
                        <div class="setting-group">
                            <label for="delayBetweenPublications">Espera entre publicaciones (seg):</label>
                            <input type="number" id="delayBetweenPublications" 
                                   value="10" min="5" max="60">
                        </div>
                    </div>

                    <div class="control-card">
                        <h3><i class="fas fa-play-circle"></i> Acciones</h3>
                        <div class="action-buttons-vertical">
                            <button class="btn btn-success" id="startPublishingMain">
                                <i class="fas fa-rocket"></i>
                                Comenzar Publicaci贸n
                            </button>
                            <button class="btn btn-warning" id="pausePublishing" disabled>
                                <i class="fas fa-pause"></i>
                                Pausar
                            </button>
                            <button class="btn btn-danger" id="stopPublishingMain" disabled>
                                <i class="fas fa-stop"></i>
                                Detener
                            </button>
                        </div>
                    </div>
                </div>

                <div class="publish-status" id="publishStatus">
                    <h3><i class="fas fa-info-circle"></i> Estado Actual</h3>
                    <div class="status-grid">
                        <div class="status-item">
                            <label>Estado:</label>
                            <span id="currentPublishStatus">Detenido</span>
                        </div>
                        <div class="status-item">
                            <label>Progreso:</label>
                            <span id="publishProgress">0/0</span>
                        </div>
                        <div class="status-item">
                            <label>Cuenta Actual:</label>
                            <span id="currentAccount">Ninguna</span>
                        </div>
                        <div class="status-item">
                            <label>ltima Actualizaci贸n:</label>
                            <span id="lastUpdate">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs Tab -->
            <div class="tab-content" id="logs">
                <div class="section-header">
                    <h2><i class="fas fa-file-alt"></i> Logs y Reportes</h2>
                    <p>Monitorea la actividad del sistema y descarga reportes</p>
                </div>

                <div class="logs-controls">
                    <div class="logs-actions">
                        <button class="btn btn-primary" id="refreshLogs">
                            <i class="fas fa-sync-alt"></i>
                            Actualizar Logs
                        </button>
                        <button class="btn btn-success" id="downloadReport">
                            <i class="fas fa-download"></i>
                            Descargar Reporte Diario
                        </button>
                    </div>
                    <div class="logs-filter">
                        <select id="logsFilter">
                            <option value="all">Todos los logs</option>
                            <option value="info">Solo informaci贸n</option>
                            <option value="error">Solo errores</option>
                            <option value="warn">Solo advertencias</option>
                        </select>
                    </div>
                </div>

                <div class="logs-container">
                    <div class="logs-content" id="logsContent">
                        <div class="log-entry info">
                            <span class="log-time">2024-01-15 10:30:00</span>
                            <span class="log-level">INFO</span>
                            <span class="log-message">Sistema iniciado correctamente</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Modal -->
        <div class="modal" id="loadingModal">
            <div class="modal-content">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>
                <p id="loadingMessage">Procesando...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>