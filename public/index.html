<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Revolico Auto Publisher - Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-rocket"></i> Revolico Auto Publisher</h1>
                <p>Automatización de publicaciones masivas para clasificados</p>
                <div class="status-indicator" id="connectionStatus">
                    <i class="fas fa-circle"></i>
                    <span>Desconectado</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="tab-button active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i> Dashboard
            </button>
            <button class="tab-button" data-tab="sheets">
                <i class="fas fa-table"></i> Google Sheets
            </button>
            <button class="tab-button" data-tab="accounts">
                <i class="fas fa-users"></i> Cuentas
            </button>
            <button class="tab-button" data-tab="publish">
                <i class="fas fa-paper-plane"></i> Publicar
            </button>
            <button class="tab-button" data-tab="logs">
                <i class="fas fa-file-alt"></i> Logs
            </button>
        </nav>

        <!-- Tab Contents -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="dashboard-grid">
                    <!-- Statistics Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="publishedToday">0</h3>
                                <p>Publicados Hoy</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-list"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="totalProducts">0</h3>
                                <p>Total Productos</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="activeAccounts">0</h3>
                                <p>Cuentas Activas</p>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="errorCount">0</h3>
                                <p>Errores</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <h2><i class="fas fa-bolt"></i> Acciones Rápidas</h2>
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-large" id="startPublishing">
                                <i class="fas fa-play"></i>
                                Iniciar Publicación Masiva
                            </button>
                            <button class="btn btn-danger btn-large" id="stopPublishing" disabled>
                                <i class="fas fa-stop"></i>
                                Detener Publicación
                            </button>
                        </div>
                    </div>

                    <!-- Progress Section -->
                    <div class="progress-section" id="progressSection" style="display: none;">
                        <h2><i class="fas fa-tasks"></i> Progreso Actual</h2>
                        <div class="progress-info">
                            <div class="progress-text">
                                <span id="progressText">Preparando...</span>
                                <span id="progressPercentage">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>
                        <div class="current-status" id="currentStatus">
                            Iniciando sistema...
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="recent-activity">
                        <h2><i class="fas fa-history"></i> Actividad Reciente</h2>
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <i class="fas fa-info-circle"></i>
                                <span>Sistema iniciado correctamente</span>
                                <small class="timestamp">Hace unos momentos</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Google Sheets Tab -->
            <div class="tab-content" id="sheets">
                <div class="section-header">
                    <h2><i class="fas fa-table"></i> Configuración de Google Sheets</h2>
                    <p>Conecta tu hoja de cálculo para obtener los productos a publicar</p>
                </div>

                <div class="sheets-config">
                    <div class="config-card">
                        <h3><i class="fas fa-key"></i> Autorización</h3>
                        <div class="auth-status" id="authStatus">
                            <i class="fas fa-times-circle text-danger"></i>
                            <span>No autorizado</span>
                        </div>
                        <button class="btn btn-primary" id="authorizeGoogle">
                            <i class="fas fa-sign-in-alt"></i>
                            Autorizar Google Sheets
                        </button>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-link"></i> Conexión</h3>
                        <button class="btn btn-secondary" id="testConnection">
                            <i class="fas fa-plug"></i>
                            Probar Conexión
                        </button>
                        <div class="connection-result" id="connectionResult"></div>
                    </div>

                    <div class="config-card">
                        <h3><i class="fas fa-eye"></i> Vista Previa</h3>
                        <button class="btn btn-secondary" id="previewProducts">
                            <i class="fas fa-search"></i>
                            Ver Productos
                        </button>
                        <div class="products-preview" id="productsPreview"></div>
                    </div>
                </div>

                <div class="sheet-requirements">
                    <h3><i class="fas fa-info-circle"></i> Estructura Requerida</h3>
                    <p>Tu hoja de Google Sheets debe tener estas columnas:</p>
                    <div class="requirements-grid">
                        <div class="requirement-item required">
                            <i class="fas fa-star text-danger"></i>
                            <strong>nombre</strong> - Nombre del producto
                        </div>
                        <div class="requirement-item required">
                            <i class="fas fa-star text-danger"></i>
                            <strong>precio</strong> - Precio del producto
                        </div>
                        <div class="requirement-item required">
                            <i class="fas fa-star text-danger"></i>
                            <strong>descripcion</strong> - Descripción detallada
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>imagenURL</strong> - URL de la imagen
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>categoria</strong> - Categoría del producto
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>ubicacion</strong> - Ubicación/provincia
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>contacto</strong> - Teléfono de contacto
                        </div>
                        <div class="requirement-item">
                            <i class="fas fa-circle text-warning"></i>
                            <strong>linkWhatsApp</strong> - Enlace de WhatsApp
                        </div>
                    </div>
                    <div class="requirements-note">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Nota:</strong> Los campos marcados con <i class="fas fa-star text-danger"></i> son obligatorios.
                        Los campos <strong>publicado</strong> y <strong>fecha_publicacion</strong> se llenarán automáticamente.
                    </div>
                </div>
            </div>

            <!-- Accounts Tab -->
            <div class="tab-content" id="accounts">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> Gestión de Cuentas</h2>
                    <p>Configura las cuentas de Revolico para publicar</p>
                </div>

                <div class="accounts-section">
                    <div class="add-account-card">
                        <h3><i class="fas fa-plus-circle"></i> Agregar Nueva Cuenta</h3>
                        <form id="addAccountForm" class="account-form">
                            <div class="form-group">
                                <label for="accountName">Nombre de la Cuenta:</label>
                                <input type="text" id="accountName" name="accountName" required 
                                       placeholder="Ej: MiCuenta01">
                            </div>
                            <div class="form-group">
                                <label for="cookiesFile">Archivo de Cookies:</label>
                                <input type="file" id="cookiesFile" name="cookiesFile" 
                                       accept=".json,.txt" required>
                                <small class="help-text">
                                    Sube el archivo de cookies exportado desde tu navegador
                                </small>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-upload"></i>
                                Agregar Cuenta
                            </button>
                        </form>
                    </div>

                    <div class="accounts-list">
                        <h3><i class="fas fa-list"></i> Cuentas Configuradas</h3>
                        <div id="accountsList" class="accounts-grid">
                            <!-- Las cuentas se cargarán dinámicamente -->
                        </div>
                    </div>
                </div>

                <div class="cookies-help">
                    <h3><i class="fas fa-question-circle"></i> ¿Cómo exportar cookies?</h3>
                    <div class="help-steps">
                        <div class="help-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <strong>Inicia sesión</strong> en Revolico.com con tu cuenta
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <strong>Instala una extensión</strong> como "EditThisCookie" o "Cookie Editor"
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <strong>Exporta las cookies</strong> en formato JSON o texto
                            </div>
                        </div>
                        <div class="help-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <strong>Sube el archivo</strong> usando el formulario de arriba
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Publish Tab -->
            <div class="tab-content" id="publish">
                <div class="section-header">
                    <h2><i class="fas fa-paper-plane"></i> Centro de Publicación</h2>
                    <p>Controla y monitorea las publicaciones masivas</p>
                </div>

                <div class="publish-controls">
                    <div class="control-card">
                        <h3><i class="fas fa-cog"></i> Configuración</h3>
                        <div class="setting-group">
                            <label for="maxPublicationsPerAccount">Máximo por cuenta:</label>
                            <input type="number" id="maxPublicationsPerAccount" 
                                   value="20" min="1" max="50">
                        </div>
                        <div class="setting-group">
                            <label for="delayBetweenPublications">Espera entre publicaciones (seg):</label>
                            <input type="number" id="delayBetweenPublications" 
                                   value="10" min="5" max="60">
                        </div>
                    </div>

                    <div class="control-card">
                        <h3><i class="fas fa-play-circle"></i> Acciones</h3>
                        <div class="action-buttons-vertical">
                            <button class="btn btn-success" id="startPublishingMain">
                                <i class="fas fa-rocket"></i>
                                Comenzar Publicación
                            </button>
                            <button class="btn btn-warning" id="pausePublishing" disabled>
                                <i class="fas fa-pause"></i>
                                Pausar
                            </button>
                            <button class="btn btn-danger" id="stopPublishingMain" disabled>
                                <i class="fas fa-stop"></i>
                                Detener
                            </button>
                        </div>
                    </div>
                </div>

                <div class="publish-status" id="publishStatus">
                    <h3><i class="fas fa-info-circle"></i> Estado Actual</h3>
                    <div class="status-grid">
                        <div class="status-item">
                            <label>Estado:</label>
                            <span id="currentPublishStatus">Detenido</span>
                        </div>
                        <div class="status-item">
                            <label>Progreso:</label>
                            <span id="publishProgress">0/0</span>
                        </div>
                        <div class="status-item">
                            <label>Cuenta Actual:</label>
                            <span id="currentAccount">Ninguna</span>
                        </div>
                        <div class="status-item">
                            <label>Última Actualización:</label>
                            <span id="lastUpdate">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs Tab -->
            <div class="tab-content" id="logs">
                <div class="section-header">
                    <h2><i class="fas fa-file-alt"></i> Logs y Reportes</h2>
                    <p>Monitorea la actividad del sistema y descarga reportes</p>
                </div>

                <div class="logs-controls">
                    <div class="logs-actions">
                        <button class="btn btn-primary" id="refreshLogs">
                            <i class="fas fa-sync-alt"></i>
                            Actualizar Logs
                        </button>
                        <button class="btn btn-success" id="downloadReport">
                            <i class="fas fa-download"></i>
                            Descargar Reporte Diario
                        </button>
                    </div>
                    <div class="logs-filter">
                        <select id="logsFilter">
                            <option value="all">Todos los logs</option>
                            <option value="info">Solo información</option>
                            <option value="error">Solo errores</option>
                            <option value="warn">Solo advertencias</option>
                        </select>
                    </div>
                </div>

                <div class="logs-container">
                    <div class="logs-content" id="logsContent">
                        <div class="log-entry info">
                            <span class="log-time">2024-01-15 10:30:00</span>
                            <span class="log-level">INFO</span>
                            <span class="log-message">Sistema iniciado correctamente</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Modal -->
        <div class="modal" id="loadingModal">
            <div class="modal-content">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>
                <p id="loadingMessage">Procesando...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toastContainer"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>